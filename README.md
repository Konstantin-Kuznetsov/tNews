### tNews
> **Использованные в проекте библиотеки:** 

> - RxJava + RxAndroid
> - Retrofit2 + Adapter-rxjava2 
> - GSON
> - Dagger 2.13
> - UI - Fragments, ConstraintLayout, CardView, RecyclerView, WebView

Описание
----------
Тестовое задание, найденное в интернете (http://forum.startandroid.ru/viewtopic.php?f=54&t=6827&view=next)

Создать приложение "Новости", которое будет загружать из API https://api.tinkoff.ru/v1/news заголовки новостей банка и показывать их в виде списка.
В каждом элементе списка i должен отображаться текст из поля payload[i].text. Список должен быть отсортирован по полю publicationDate по убыванию. Полученные данные должны кешироваться на клиенте. Данные должны обновляться после оттягивания (pull-to-refresh).
При нажатии на каждую новость, она должна открывать новый экран и показывать содержимое (payload.content) загруженное из API https://api.tinkoff.ru/v1/news_content?id={ payload[i].id}. Уделять много внимания дизайну не стоит, но чистый аккуратный интерфейс обязателен. При реализации можно пользоваться любыми привычными инструментами/библиотеками.

Структурный паттерн - MVP
----------
![Структурная схема проекта](https://user-images.githubusercontent.com/18750579/33020077-e53a4328-ce0d-11e7-9ea2-8d1a6f02e9db.png)

Структура - одна `Activity` и по фрагменту на каждый экран(список заголовков новостей и подробный текст новости).

Model
----------

 -	В слое данных реализован паттерн “репозиторий”. Класс `DataManager` абстрагирует презентеры от непосредственных источников и хранилищ данных через интерфейс. 
 -	Класс `RESTDataProvider`, используя `Retrofit` асинхронно забирает данные с сервера api.tinkoff. Ответ приходит в JSON и с помощью конвертера `GSON` парсится. 
 - Получаемый список заголовков сортируется от новым к старым (обратная сортировка по полю dateOfPublication, которое есть long в миллисекундах) в соответствии с условием задания, с помощью оператора RxJava `toSortedList`. Полученный сортированный список оборачивается в `Observable<List<News>>` с помощью `retrofit2:adapter-rxjava2`. Если запрашиваются подробности новости по ID, то ответ оборачивается в `Observable<NewsDetailed>`.
 -	`CacheHelper` пишет и читает получаемые данные в `LruCache`, т.к в условии задания оговорено кеширование новостей. БД решил не использовать, т.к смысла долговременно хранить новости нет никакого - это быстроустаревающие данные.
 - API tinkoff устроен так, что в списке передаваемых заголовков по каждой новости есть ID и publicationDate, а запрашивая подробности по новости, получаем ID, publicationDate и lastModificationDate. Т.е теоретически, новость может быть изменена после публикации, но мы не сможем это понять, пока не закачаем заново подробности и не проверим поле lastModificationDate. Поэтому сделано допущение, что ключом для хранения текста отдельных новостей будет просто ID, без учета возможного редактирования после публикации.

View
----------
- Все View сделаны максимально пассивными – в них `Dagger` инжектит `presenter`, в них обрабатываются события ЖЦ фрагмента, а также прикрепляется (`relevantPresenter.attachView(this)`) и открепляется (`relevantPresenter.detachView()`) от  презентера. Все остальное делает презентер, хранящий `WeakReference` на фрагмент. В общем, View только передает пользовательские события Presenter, больше ничего.

Presenter
----------
Презентеры переживают поворот экрана, обрабатывают пользовательские события, обращаются к `DataManager` за данными.


Описание
----------
![news-screen](https://user-images.githubusercontent.com/18750579/33018257-b7a7f0ba-ce06-11e7-8a12-75c302f0a2f2.gif)

На основном экране отображается список заголовков новостей в `RecyclerView`, заголовки сделаны карточками `CardView`. Обновление делается с помощью swipe вниз, в xml список помещен в `SwipeRefreshLayout`. При повороте экрана запрашиваются закешированные данные, если таких нет- попытка обновиться по сети, если и это невозможно - отображение сообщения об ошибке на экране. Если обновление по свайпу оканчивается неудачно- тоже показывается сообщение о типе ошибки и кнопка загрузки последнего закешированного.
Экран с подробной информацией по новости работает аналогично первому, за исключением того, что текст отображается в WebView, т.к API отдает текст с HTML разметкой в JSON.

